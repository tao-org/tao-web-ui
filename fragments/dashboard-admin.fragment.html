    <!-- Content Header (Page header) -->
    <section class="content-header tao-async-ph">
        <!--
        <div class="row">
            <div class="col-md-12">
        -->
        <h1>Dashboard <small>Overview of TAO activity.</small></h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active">Dashboard</li>
        </ol>
        <!-- 	</div>
        </div>
        -->
    </section>
    <!-- /Content Header (Page header) -->
    <!-- Main content -->
    <section class="content tao-async-mc">
        <div class="row">
            <!-- Left col -->
            <section class="col-lg-7">


                <!-- TO DO List -->
                <div id="notification-history-panel" class="box box-primary">
                    <div class="box-header" style="cursor: move;">
                        <i class="ion ion-clipboard"></i>
                        <h3 class="box-title">Notifications History</h3>
                        <div class="box-tools pull-right">
                            <ul class="pagination pagination-sm inline">
                                <li class="disabled"><span>current page: <strong class="val-current-page">1</strong></span></li>
                                <li class="prev"><a href="#prev" data-action="go-prev" title="See newer notifications">«</a></li>
                                <li class="next"><a href="#next" data-action="go-next" title="See older notifications">»</a></li>
                                <li class="refresh"><a href="#refresh" data-action="go-refresh" title="Refresh list"><i class="fa fa-refresh" aria-hidden="true"></i></a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <ul id="notifications-panel-list" class="todo-list panel-list">
                            <li>
                                <span class=""><i class="fa fa-ellipsis-v"></i><i class="fa fa-ellipsis-v"></i></span>
                                <span class="text">Sample notification line.</span>
                                <small class="label label-danger"><i class="fa fa-clock-o"></i> 2017.05.02</small>
                                <div class="tools">
                                    cucuc<i class="fa fa-trash-o"></i>
                                </div>
                            </li>
                        </ul>


                        <div class="panel-list-empty callout callout-empty collapse">
                            <p>Notifications history is empty.</p>
                        </div>
                    </div>
                    <!-- /.box-body -->
                    <div class="box-footer clearfix no-border">
                        <div class="box-tools pull-right">
                            <ul class="pagination pagination-sm inline">
                                <li class="disabled"><span>current page: <strong class="val-current-page">1</strong></span></li>
                                <li class="prev"><a href="#prev" data-action="go-prev" title="See newer notifications">«</a></li>
                                <li class="next"><a href="#next" data-action="go-next" title="See older notifications">»</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="box-notification"><p><span>List updated</span></p></div>
                </div>
                <!-- /.box -->
                <!-- TO DO List -->
                <div id="exec-history-panel" class="box box-primary">
                    <div class="box-header" style="cursor: move;">
                        <i class="ion ion-clipboard"></i>
                        <h3 class="box-title">Executions History</h3>
                        <div class="box-tools pull-right">
                            <ul class="pagination pagination-sm inline">
                                <li class="disabled"><span>current page: <strong class="val-current-page">1</strong></span></li>
                                <li class="prev"><a href="#prev" data-action="go-prev" title="See newer notifications">«</a></li>
                                <li class="next"><a href="#next" data-action="go-next" title="See older notifications">»</a></li>
                                <li class="refresh"><a href="#refresh" data-action="go-refresh" title="Refresh list"><i class="fa fa-refresh" aria-hidden="true"></i></a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <div class="panel-list">
                        </div>
                        <div class="panel-list-empty callout callout-empty collapse">
                            <p>Results history is empty. It looks you did not run any workflows yet.</p>
                        </div>
                    </div>
                    <!-- /.box-body -->
                    <div class="box-footer clearfix no-border">
                        <div class="box-tools pull-right">
                            <ul class="pagination pagination-sm inline">
                                <li class="disabled"><span>current page: <strong class="val-current-page">1</strong></span></li>
                                <li class="prev"><a href="#prev" data-action="go-prev" title="See newer notifications">«</a></li>
                                <li class="next"><a href="#next" data-action="go-next" title="See older notifications">»</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="box-notification"><p><span>List updated</span></p></div>
                </div>
                <!-- /.box -->
            </section>
            <!-- /.Left col -->
            <section class="col-lg-5">

                <!-- Monitor master -->
                <div id="widget-master-monitor" class="box box-solid bg-navy">
                    <div class="box-header" style="cursor: move;">
                        <i class="fa fa-area-chart"></i>
                        <h3 class="box-title">Master node monitor</h3>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                            <dl class="dl-horizontal">
                                <dt>CPU usage&nbsp;<i class="fa fa-square" aria-hidden="true" style="color:rgba(220,220,220,0.5);"></i></dt>
                                <dd><span class="val-mm-processors">n/a</span></dd>
                                <dt>Memory&nbsp;<i class="fa fa-square" aria-hidden="true" style="color:rgba(255,187,205,0.5);"></i></dt>
                                <dd><span class="val-mm-memory" style="text-transform: lowercase;">n/a</span></dd>
                                <dt>Storage&nbsp;<i class="fa fa-square" aria-hidden="true" style="color:rgba(151,187,205,0.5);"></i></dt>
                                <dd><span class="val-mm-storage" style="text-transform: lowercase;">n/a</span></dd>
                            </dl>
                    </div>
                    <div>
                        <canvas id="myChart" width="400" height="200"></canvas>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
                <!-- Load -->
                <div class="box box-solid bg-green-gradient collapse">
                    <div class="box-header" style="cursor: move;">
                        <i class="fa fa-calendar"></i>
                        <h3 class="box-title">Load</h3>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body no-padding">

                    </div>
                    <!-- /.box-body -->
                    <div class="box-footer text-black">
                        <div class="row">
                            <div class="col-sm-12">
                                <!-- Progress bars -->
                                <div class="clearfix">
                                    <span class="pull-left">Node #1</span>
                                    <small class="pull-right">90%</small>
                                </div>
                                <div class="progress xs">
                                    <div class="progress-bar progress-bar-green" style="width: 90%;"></div>
                                </div>

                                <div class="clearfix">
                                    <span class="pull-left">Node #2</span>
                                    <small class="pull-right">70%</small>
                                </div>
                                <div class="progress xs">
                                    <div class="progress-bar progress-bar-green" style="width: 70%;"></div>
                                </div>

                                <div class="clearfix">
                                    <span class="pull-left">Node #3</span>
                                    <small class="pull-right">0%</small>
                                </div>
                                <div class="progress xs">
                                    <div class="progress-bar progress-bar-green" style="width: 0;"></div>
                                </div>

                                <div class="clearfix">
                                    <span class="pull-left">Node #4</span>
                                    <small class="pull-right">30%</small>
                                </div>
                                <div class="progress xs">
                                    <div class="progress-bar progress-bar-green" style="width: 30%;"></div>
                                </div>

                            </div>
                        </div>
                        <!-- /.row -->
                    </div>
                </div>
                <!-- /.box -->

                <!-- TO DO List -->
                <div id="exec-list-panel" class="box box-warning">
                    <div class="box-header" style="cursor: move;">
                        <i class="ion ion-clipboard"></i>
                        <h3 class="box-title">Running Jobs</h3>
                        <div class="box-tools pull-right">
                            <ul class="pagination pagination-sm inline">
                                <li class="disabled"><span>current page: <strong class="val-current-page">1</strong></span></li>
                                <li class="prev"><a href="#prev" data-action="go-prev" title="See newer notifications">«</a></li>
                                <li class="next"><a href="#next" data-action="go-next" title="See older notifications">»</a></li>
                                <li class="refresh"><a href="#refresh" data-action="go-refresh" title="Refresh list"><i class="fa fa-refresh" aria-hidden="true"></i></a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <div class="panel-list">
                        </div>
                        <div class="panel-list-empty callout callout-empty collapse">
                            <p>Results history is empty. It looks you did not run any workflows yet.</p>
                        </div>
                    </div>
                    <!-- /.box-body -->
                    <div class="box-footer clearfix no-border">
                        <div class="box-tools pull-right">
                            <ul class="pagination pagination-sm inline">
                                <li class="disabled"><span>current page: <strong class="val-current-page">1</strong></span></li>
                                <li class="prev"><a href="#prev" data-action="go-prev" title="See newer notifications">«</a></li>
                                <li class="next"><a href="#next" data-action="go-next" title="See older notifications">»</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="box-notification"><p><span>List updated</span></p></div>
                </div>
                <!-- /.box -->
            </section>
            <!-- right col -->
        </div>
    </section><!-- /.content -->
<script>
    var _loadChart = {
        myNewChart:null,
        data:{
            labels : ["","","","","","","","","","","","","","","","","","","",""],
            datasets : [
                {
                    fillColor : "rgba(220,220,220,0.5)",
                    strokeColor : "rgba(220,220,220,1)",
                    pointColor : "rgba(220,220,220,1)",
                    pointStrokeColor : "#fff",
                    data : [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                },
                {
                    fillColor : "rgba(255,187,205,0.5)",
                    strokeColor : "rgba(255,187,205,1)",
                    pointColor : "rgba(151,187,205,1)",
                    pointStrokeColor : "#fff",
                    data : [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                },
                {
                    fillColor : "rgba(151,187,205,0.5)",
                    strokeColor : "rgba(151,187,205,1)",
                    pointColor : "rgba(151,187,205,1)",
                    pointStrokeColor : "#fff",
                    data : [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                }
            ]
        },
        optionsNoAnimation :{
            animation : false,
            scaleOverride : true,
            scaleSteps : 100,
            scaleStepWidth : 20,
            scaleStartValue : 0
        },
        initChart: function(){
            this.optionsNoAnimation = {animation : false};
            this.myNewChart = new Chart(document.getElementById("myChart").getContext("2d"));
            this.myNewChart.Line(_loadChart.data, _loadChart.optionsNoAnimation);
        },
        updateData: function(v1,v2,v3,l0){
            if(this.myNewChart === null || typeof this.myNewChart !== 'object'){
                this.initChart();
            }
            var l = this.data["labels"];
            var ds0 = this.data["datasets"][0]["data"];
            var ds1 = this.data["datasets"][1]["data"];
            var ds2 = this.data["datasets"][2]["data"];
            l.push(l0);
            l.shift();
            ds0.push(v1);
            ds1.push(v2);
            ds2.push(v3);
            ds0.shift();
            ds1.shift();
            ds2.shift();
            this.myNewChart.Line(_loadChart.data, _loadChart.optionsNoAnimation);
        }
    };

    function updateMasterMonitorWidget(){
        $.ajax({
            cache: false,
            url: baseRestApiURL + "monitor/master/",
            dataType : 'json',
            type: 'GET',
            headers: {
                "Accept": "application/json",
                "Content-Type": "application/json",
                "X-Auth-Token": window.tokenKey
            }
        }).done(function (getMasterMonitorResponse) {
            var r = chkTSRF(getMasterMonitorResponse);
            var percent = {
                cpu: parseInt(r.cpuTotal),
                memory: parseInt((r.totalMemory-r.availableMemory)/r.totalMemory*100),
                storage: parseInt(r.diskUsed/r.diskTotal*100)
            };
            $(".val-mm-processors").text(percent.cpu+"%");
            $(".val-mm-memory").text(percent.memory+"% ("+(r.totalMemory-r.availableMemory)+"/"+r.totalMemory+", used/total, "+r.memoryUnit+")");
            $(".val-mm-storage").text(percent.storage+"% ("+r.diskUsed+"/"+r.diskTotal+", used/total, "+r.diskUnit+")");
            var chartCurrentTime = moment ().format("HH:mm:ss");
            _loadChart.updateData(
                (percent.cpu),
                (percent.memory),
                (percent.storage),
                (chartCurrentTime)
            );
        }).fail(function (jqXHR, textStatus) {
        }).complete(function(){
            if($("#widget-master-monitor").length){
                setTimeout(function(){
                    updateMasterMonitorWidget();
                },monitorCheckInterval);
            }
        });
    }

    $( document ).ready(function() {
        $( window )
            .resize(function() {
                if($("#widget-master-monitor").length) {
                    var w = parseInt($("#widget-master-monitor").width());
                    $("#myChart").attr("width", w);
                    _loadChart.initChart();
                }
            })
            .trigger( "resize" );
        updateMasterMonitorWidget();
        //bind resize event

        $("#exec-list-panel").npExecPanels({
            msgEnd: "No more job to show.",
            msgEmpty: "Job pool is empty. No workflow is currently running.",
            theme: '',
            url: baseRestApiURL + "orchestrator/running/jobs/"
        });
        $("#exec-history-panel").npExecPanels({
            msgEnd: "You reached the end of execution list. Nothing more to show.",
            msgEmpty: "Results history is empty. It looks you did not run any workflows yet.",
            theme: '',
            url: baseRestApiURL + "orchestrator/history/"
        });
        $("#notification-history-panel").npNotificationsPanels({
            msgEnd: "You reached the end of notification list. Nothing more to show.",
            msgEmpty: "Notification history is empty. You do not have any notifications yet.",
            theme: '',
            headerUser: taoUserProfile.username,
            url: baseRestApiURL + "monitor/notification/"
        });
    });
</script>
